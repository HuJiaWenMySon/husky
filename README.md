# Husky

## 简介

本代码库基于ROS Noetic实现了四足机器人运动控制，其中运动控制模块采用了基于MPC的传统控制方法。本代码主要参考MIT cheetah的实现，同时参考了宇树、华为等优秀开源项目，目前仅实现了go1的仿真，但根据提供的接口应该不难支持go2，A1等。项目名husky是一种著名的雪橇犬。

## 安装和使用

主要运行环境是ROS Noetic，理论上只需要安装Gazebo即可，其他的报啥错装啥。第三方依赖主要是Eigen和qpOASES，这两个库的安装已经有许多参考资料。模型文件和宇树机器人SDK已经放在仓库中，catkin_make即可。编译过程可能会报错，建议先编译宇树SDK。

此外，还需要一个游戏手柄，一般的xbox手柄应该就可以。

运行方式：

1、启动gazebo，手柄节点也会在这个launch文件中启动：

```shell
roslaunch quadruped start_gazebo.launch 
```

2、启动控制器：

```shell
roslaunch quadruped start_robot.launch
```

3、连接手柄

* A：位置模式站立
* B：踏步
* X：保护模式
* Y：力矩模式站立

一般按A进入位置模式站立，待站立完成后按B踏步即可，在踏步模式下：

* 左摇杆纵轴为X方向速度；
* 左摇杆横轴为Y方向速度；
* 右摇杆横轴为转向；

## 模块介绍

### 主要模块

quadruped算法程序包含以下几个模块：

* controller：控制器的实现;
* estimator：机器人状态估计器的实现;
* fsm：机器人状态机实现，目前支持了5个类;
* gait：步态生成和规划;
* robot：机器人硬件，包含本体、电机、手柄等硬件的数据结构;
* robotics：机器人学组件，包含单腿运动学、全身运动学等解算模块;
* utils：编程和计算中需要使用的工具库;

在doc文件夹中有针对每个模块较为详细的文档。

### 程序框图
